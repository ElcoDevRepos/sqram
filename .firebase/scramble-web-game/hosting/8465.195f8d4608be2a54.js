"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8465],{8465:(T,g,d)=>{d.r(g),d.d(g,{ProfilePageModule:()=>M});var P=d(6895),v=d(4719),l=d(9928),p=d(4145),c=d(5861),m=d(7323),C=d(8304),o=d(6027),y=d(5525),t=d(6353);function w(a,h){if(1&a){const e=t.EpF();t.TgZ(0,"ion-item",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.remove(s))}),t._uU(1),t.qZA()}if(2&a){const e=h.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}const O=[{path:"",component:(()=>{class a{constructor(e,n,i,s,r,u){this.menu=e,this.alertCtrl=n,this.auth=i,this.firestore=s,this.router=r,this.toastCtrl=u,this.displayName="",this.friends=[]}ngOnInit(){var e=this;this.auth.onAuthStateChanged(function(){var n=(0,c.Z)(function*(i){e.displayName=e.auth.currentUser.displayName,e.getFriends()});return function(i){return n.apply(this,arguments)}}())}getFriends(){this.friends=[],(0,o.PL)((0,o.hJ)(this.firestore,"users",this.auth.currentUser.uid,"friends")).then(e=>{e.forEach(n=>{this.friends.push(n.data())})})}openMenu(){this.menu.enable(!0,"menu"),this.menu.open("menu")}goHome(){this.router.navigate(["home"])}openDonate(){window.open("https://ko-fi.com/sqram","_blank")}updateName(){var e=this;return(0,c.Z)(function*(){var i;yield(yield e.alertCtrl.create({header:"Please enter your name",buttons:[{text:"OK",handler:(i=(0,c.Z)(function*(s){let r=s[0];if(r.length>0){r=r.replaceAll(" ",""),r=r.toLowerCase();const u=(0,o.hJ)(e.firestore,"users"),f=(0,o.IO)(u,(0,o.ar)("name","==",r));if(0!==(yield(0,o.PL)(f)).size)return e.showToast("That Name Already Exists!"),!1;(0,m.ck)(e.auth.currentUser,{displayName:r}).then(()=>{(0,o.r7)((0,o.JU)(e.firestore,"users",e.auth.currentUser.uid),{name:r}).then(()=>e.showToast("Profile Updated"))})}return!0}),function(r){return i.apply(this,arguments)})}],inputs:[{type:"text",placeholder:"",attributes:{maxlength:10}}]})).present()})()}addFriend(){var e=this;return(0,c.Z)(function*(){var i;yield(yield e.alertCtrl.create({header:"Enter a Friend\u2019s Name",buttons:[{text:"OK",handler:(i=(0,c.Z)(function*(s){let r=s[0];if(r===e.auth.currentUser.displayName)return void e.showToast("Don't enter you're own name!");if(r=r.toLowerCase(),!(yield(0,o.PL)((0,o.IO)((0,o.hJ)(e.firestore,"users",e.auth.currentUser.uid,"friends"),(0,o.ar)("name","==",r)))).empty)return void e.showToast("Friend Already Added!");const f=(0,o.hJ)(e.firestore,"users"),_=(0,o.IO)(f,(0,o.ar)("name","==",r));return(0,o.PL)(_).then(x=>{x.empty?e.showToast("Friend Does Not Exist"):x.forEach(b=>{(0,y.ET)((0,o.hJ)(e.firestore,"users",e.auth.currentUser.uid,"friends"),{uid:b.id,name:b.data().name}).then(()=>{e.showToast("Friend Added"),e.getFriends()})})}),!0}),function(r){return i.apply(this,arguments)})}],inputs:[{type:"text",placeholder:"",attributes:{maxlength:10}}]})).present()})()}remove(e){var n=this;return(0,c.Z)(function*(){var s;yield(yield n.alertCtrl.create({header:"Remove this friend?",buttons:[{text:"Yes",role:"destructive",handler:(s=(0,c.Z)(function*(r){console.log(e);let u=yield(0,o.PL)((0,o.IO)((0,o.hJ)(n.firestore,"users",n.auth.currentUser.uid,"friends"),(0,o.ar)("name","==",e.name)));if(!u.empty)return console.log(u.empty),u.forEach(f=>{console.log(f.id),(0,y.oe)((0,o.JU)(n.firestore,"users",n.auth.currentUser.uid,"friends",f.id)).then(()=>n.getFriends())}),!0;n.showToast("Friend Not Found!")}),function(u){return s.apply(this,arguments)})},{text:"No",handler:function(){var s=(0,c.Z)(function*(r){return!0});return function(u){return s.apply(this,arguments)}}()}]})).present()})()}goToLeaderboard(){var e=this;return(0,c.Z)(function*(){if(null===e.auth.currentUser.email){const n=yield e.alertCtrl.create({header:"Log In or create an account to see how you rank against friends and save your stats wherever you Sqram! ",buttons:[{text:"Create Account",handler:i=>{e.claim()}},{text:"Log In",handler:i=>{e.login()}}]});e.menu.close(),yield n.present()}else e.router.navigate(["../leaderboard"])})()}claim(){var e=this;return(0,c.Z)(function*(){const n=yield e.alertCtrl.create({header:"Enter New Account Info",buttons:[{text:"OK",handler:i=>{const s=C.w9.credential(i[0],i[1]);(0,m.ZJ)(e.auth.currentUser,s).then(function(){var r=(0,c.Z)(function*(u){yield(0,m.ck)(u.user,{displayName:i[2]}),yield(0,o.r7)((0,o.JU)(e.firestore,"users",e.auth.currentUser.uid),{name:i[2]}),window.location.reload()});return function(u){return r.apply(this,arguments)}}()).catch(r=>{r.message.includes("auth/email-already-in-use")?e.showToast("Email Already in Use!"):r.message.includes("auth/weak-password")&&e.showToast("Password should be at least 6 characters.")})}}],inputs:[{type:"email",placeholder:"Email"},{type:"password",placeholder:"Password"}]});e.menu.close(),yield n.present()})()}login(){var e=this;return(0,c.Z)(function*(){const n=yield e.alertCtrl.create({header:"Please enter your info",buttons:[{text:"OK",handler:i=>{(0,m.e5)(e.auth,i[0],i[1]).then(s=>{window.location.reload()})}}],inputs:[{type:"email",placeholder:"Email"},{type:"password",placeholder:"Password"}]});e.menu.close(),yield n.present()})()}showToast(e){var n=this;return(0,c.Z)(function*(){(yield n.toastCtrl.create({message:e,position:"bottom",duration:2500})).present()})()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(l._q),t.Y36(l.Br),t.Y36(m.gx),t.Y36(o.gg),t.Y36(p.F0),t.Y36(l.yF))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-profile"]],decls:28,vars:2,consts:[["id","game-board"],["id","menu-bar"],["size","1"],["name","menu","id","menu-icon",2,"color","#7b16b5",3,"click"],["size","6"],["src","../../assets/images/Sqram_Logo.svg","id","title",3,"click"],["id","heart-icon","size","5"],["name","heart","id","donate-icon",2,"color","#7b16b5",3,"click"],["lines","none"],["button","","detail","",3,"click"],["button","","detail","",3,"click",4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-content")(1,"div",0)(2,"ion-row",1)(3,"ion-col",2)(4,"ion-icon",3),t.NdJ("click",function(){return n.openMenu()}),t.qZA()(),t.TgZ(5,"ion-col",4)(6,"img",5),t.NdJ("click",function(){return n.goHome()}),t.qZA()(),t.TgZ(7,"ion-col",6)(8,"ion-icon",7),t.NdJ("click",function(){return n.openDonate()}),t.qZA()()(),t.TgZ(9,"ion-card")(10,"ion-card-header")(11,"ion-card-title"),t._uU(12),t.qZA(),t.TgZ(13,"ion-card-subtitle"),t._uU(14,"Profile Settings"),t.qZA()(),t.TgZ(15,"ion-card-content")(16,"ion-list",8)(17,"ion-item",9),t.NdJ("click",function(){return n.updateName()}),t._uU(18,"Update Profile Name"),t.qZA(),t.TgZ(19,"ion-item",9),t.NdJ("click",function(){return n.addFriend()}),t._uU(20,"Add a Friend"),t.qZA()()()(),t.TgZ(21,"ion-card")(22,"ion-card-header")(23,"ion-card-subtitle"),t._uU(24,"Friends List"),t.qZA()(),t.TgZ(25,"ion-card-content")(26,"ion-list",8),t.YNc(27,w,2,1,"ion-item",10),t.qZA()()()()()),2&e&&(t.xp6(12),t.Oqu(n.displayName),t.xp6(15),t.Q6J("ngForOf",n.friends))},dependencies:[P.sg,l.PM,l.FN,l.Zi,l.tO,l.Dq,l.wI,l.W2,l.gu,l.Ie,l.q_,l.Nd],styles:['@media (max-width: 500px){#game-board[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;background:white;height:100vh;border:1px solid #bcbcbc;box-shadow:0 7px 20px #bdbdbd}}@media (min-width: 501px){#game-board[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;width:500px;margin:auto;background:white;height:100vh;border:1px solid #bcbcbc;box-shadow:0 7px 20px #bdbdbd}}#title[_ngcontent-%COMP%]{padding-bottom:15px;width:120px;padding-top:15px;margin-left:25px}#title[_ngcontent-%COMP%]:hover{transform:scale(1.1)}#menu-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:100%}#menu-bar[_ngcontent-%COMP%]   #heart-icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;font-size:35px;justify-content:flex-end}#menu-bar[_ngcontent-%COMP%]   #donate-icon[_ngcontent-%COMP%]:hover, #menu-bar[_ngcontent-%COMP%]   #flag-icon[_ngcontent-%COMP%]:hover, #menu-bar[_ngcontent-%COMP%]   #career-icon[_ngcontent-%COMP%]:hover, #menu-bar[_ngcontent-%COMP%]   #menu-icon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}#menu-bar[_ngcontent-%COMP%]   #menu-icon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;font-size:35px}ion-card[_ngcontent-%COMP%]{width:100%}#donate-icon[_ngcontent-%COMP%]:before, #flag-icon[_ngcontent-%COMP%]:before, #career-icon[_ngcontent-%COMP%]:before, #menu-icon[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%}']}),a})()}];let Z=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[p.Bz.forChild(O),p.Bz]}),a})(),M=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[P.ez,v.u5,l.Pc,Z]}),a})()}}]);